<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenIndiana: A Modern Illumos Distribution</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --oi-primary: #8b5cf6; --oi-secondary: #3b82f6; --oi-bg: #f8fafc; --oi-text: #1e293b; --oi-card-bg: #ffffff; --oi-card-border: #e2e8f0; }
        .dark-mode { --oi-primary: #a78bfa; --oi-secondary: #60a5fa; --oi-bg: #0f172a; --oi-text: #e2e8f0; --oi-card-bg: #1e293b; --oi-card-border: #334155; }
        body { font-family: 'Inter', sans-serif; background-color: var(--oi-bg); color: var(--oi-text); transition: all 0.3s ease; }
        .oi-header { background: linear-gradient(135deg, var(--oi-primary) 0%, var(--oi-secondary) 100%); color: white; }
        .oi-card { background-color: var(--oi-card-bg); border: 1px solid var(--oi-card-border); border-radius: 0.75rem; transition: all 0.3s ease; }
        .gradient-text { background: linear-gradient(90deg, var(--oi-primary), var(--oi-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    </style>
</head>
<body class="antialiased">
    <header class="oi-header py-4 sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/OpenIndiana_logo_large.svg" alt="OpenIndiana Logo" class="h-10">
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#downloads" class="hover:underline">Downloads</a>
                <a href="#repos" class="hover:underline">Repos</a>
                <a href="#community" class="hover:underline">Community</a>
                <a href="#about" class="hover:underline">About</a>
                <a href="site_docs/index.html" class="hover:underline">Docs</a>
            </nav>
            <button id="darkModeToggle" class="px-3 py-1 bg-white/20 rounded text-sm hover:bg-white/30 transition">ð Toggle Mode</button>
        </div>
    </header>

    <section class="container mx-auto px-4 py-20 text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-6 gradient-text">OpenIndiana: A Modern Illumos Distribution</h1>
        <p class="text-xl max-w-3xl mx-auto mb-8 opacity-80">Built on the Illumos kernel. Designed for developers and sysadmins who value ZFS, DTrace, and enterprise stability.</p>
        <div class="flex flex-wrap justify-center gap-4">
            <a href="#downloads" class="inline-block px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:opacity-90 transition transform hover:scale-105">Get Started</a>
            <a href="site_docs/index.html" class="inline-block px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-black transition transform hover:scale-105">Read the Docs</a>
        </div>
    </section>

    <section id="announcements" class="container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold mb-8 text-center gradient-text">Latest Announcements</h2>
        <div id="announcements-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="col-span-full text-center py-10 opacity-50 italic">Checking for updates...</div>
        </div>
    </section>

    <section id="downloads" class="container mx-auto px-4 py-12 border-t border-[var(--oi-card-border)] mt-12">
        <h2 class="text-3xl font-bold mb-8 text-center gradient-text">Get OpenIndiana</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 max-w-4xl mx-auto">
            <div class="oi-card p-6">
                <h3 class="text-xl font-semibold mb-2">Hipster GUI</h3>
                <p class="opacity-70 mb-4">The modern rolling-release distribution with a desktop environment.</p>
                <a href="https://dlc.openindiana.org/isos/hipster/" class="text-blue-500 font-medium hover:underline">Download ISO &rarr;</a>
            </div>
            <div class="oi-card p-6">
                <h3 class="text-xl font-semibold mb-2">Hipster Minimal</h3>
                <p class="opacity-70 mb-4">Text-based installer for server environments and power users.</p>
                <a href="https://dlc.openindiana.org/isos/hipster/" class="text-blue-500 font-medium hover:underline">Download ISO &rarr;</a>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-white py-10 mt-20">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm text-gray-400">OpenIndiana Project. Content licensed under CDDL/Creative Commons where applicable.</p>
        </div>
    </footer>

    <script>
        // --- Theme Management ---
        const darkModeToggle = document.getElementById('darkModeToggle');
        function updateTheme(isDark) {
            document.body.classList.toggle('dark-mode', isDark);
            darkModeToggle.textContent = isDark ? 'âï¸ Light Mode' : 'ð Dark Mode';
            localStorage.setItem('darkMode', isDark);
        }
        darkModeToggle.addEventListener('click', () => updateTheme(!document.body.classList.contains('dark-mode')));
        if (localStorage.getItem('darkMode') === 'true') updateTheme(true);

        // --- Announcements Logic (Production Ready) ---
        const list = document.getElementById('announcements-list');

        async function fetchAnnouncements() {
            try {
                // Fetch from the local directory
                const response = await fetch('./data.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP Error: ${response.status}`);
                }

                const data = await response.json();
                list.innerHTML = ''; // Clear the loading state

                data.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'oi-card p-6 flex flex-col h-full';
                    card.innerHTML = `
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold mb-1 text-[var(--oi-primary)]">${item.title}</h3>
                            <p class="text-xs opacity-50 mb-4 font-medium uppercase tracking-wider">${item.date} â¢ ${item.author}</p>
                            <div class="opacity-80 text-sm leading-relaxed">${item.content}</div>
                        </div>
                    `;
                    list.appendChild(card);
                });

            } catch (err) {
                // VISIBLE ERROR REPORTING
                list.innerHTML = `
                    <div class="col-span-full text-center p-8 bg-red-500/10 border border-red-500/20 rounded-xl">
                        <p class="text-red-500 font-bold text-lg">â ï¸ Announcements Failed to Load</p>
                        <p class="text-sm opacity-70 mt-2">Error: ${err.message}</p>
                        <div class="mt-4 text-xs font-mono bg-black/5 p-2 rounded inline-block">
                        
                        </div>
                    </div>
                `;
            }
        }

        // Initialize
        fetchAnnouncements();
    </script>
</body>
</html>