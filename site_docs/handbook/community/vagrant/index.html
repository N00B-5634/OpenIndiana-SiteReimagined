/<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://n00b-5634.github.io/OpenIndiana-SiteReimagined/handbook/community/vagrant/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Vagrant - OpenIndiana Reimagined</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../../css/style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono&display=swap" rel="stylesheet">

    <style>
        /* THE SKIP LINK */
        .skip-link {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            background: #ffde59; color: #000 !important; padding: 1rem 2rem;
            z-index: 10001; font-weight: 800; border: 3px solid black;
            transition: top 0.3s ease;
        }
        .skip-link:focus { top: 20px; outline: none; }

        /* FOOTER REMOVAL */
        .md-footer, .md-copyright, .md-footer-meta, footer:not(.custom-footer),
        [role="contentinfo"], .md-typeset hr, .md-sidebar--secondary {
            display: none !important;
        }

        :root {
            --oi-primary: #8b5cf6; --oi-secondary: #3b82f6;
            --bg-body: #ffffff; --text-main: #0f172a;
            --card-bg: #ffffff; --card-border: #e2e8f0;
            --nav-bg: rgba(255, 255, 255, 0.98);
            --code-bg: #0f172a;
            --code-text: #e2e8f0;
        }

        [data-theme="dark"] {
            --oi-primary: #a78bfa; --oi-secondary: #60a5fa;
            --bg-body: #020617; --text-main: #ffffff;
            --card-bg: #0f172a; --card-border: #334155;
            --nav-bg: rgba(2, 6, 23, 0.98);
            --code-bg: #000000;
            --code-text: #e2e8f0;
        }

        body {
            font-family: 'Inter', sans-serif; background-color: var(--bg-body);
            color: var(--text-main); margin: 0; display: flex;
            flex-direction: column; min-height: 100vh;
        }

        .navbar-hardened {
            position: sticky; top: 0; z-index: 9999; background: var(--nav-bg);
            backdrop-filter: blur(12px); border-bottom: 1px solid var(--card-border);
            padding: 0.75rem 5%; display: flex; justify-content: space-between; align-items: center;
            gap: 2rem;
        }

        .header-search-wrap { flex: 1; max-width: 500px; position: relative; }
        .header-search-input {
            width: 100%; padding: 0.6rem 1.25rem; border-radius: 12px;
            background: var(--card-bg); border: 2px solid var(--card-border);
            color: var(--text-main); font-size: 0.9rem; outline: none;
        }

        .hero-banner {
            background: linear-gradient(135deg, var(--oi-primary), var(--oi-secondary)) !important;
            color: white !important; padding: 12rem 1rem; text-align: center;
        }
        .hero-title { font-size: clamp(2.5rem, 8vw, 4.5rem); font-weight: 800; letter-spacing: -0.05em; color: white !important; margin: 0; }

        .documentation-container { display: flex; max-width: 1400px; margin: 0 auto; width: 100%; padding: 0 5%; }
        .sidebar-nav { width: 280px; position: sticky; top: 100px; height: fit-content; padding: 4rem 0; border-right: 1px solid var(--card-border); }
        .documentation-wrapper { flex: 1; padding: 6rem 0; max-width: 900px; }

        .markdown-engine pre {
            background-color: var(--code-bg) !important;
            padding: 1.5rem; border-radius: 12px;
            border: 1px solid var(--card-border);
            margin: 2rem 0;
            overflow-x: auto;
        }
        .markdown-engine pre code {
            color: var(--code-text) !important;
            background: transparent !important;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
        }

        .markdown-engine h1 { font-size: 3.5rem; font-weight: 800; color: var(--oi-primary) !important; margin-bottom: 2rem; }
        .custom-footer { border-top: 1px solid var(--card-border); padding: 4rem 5%; text-align: center; margin-top: auto; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
    </style>

    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">OpenIndiana Reimagined</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Welcome to OpenIndiana Reimagined</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Books <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../books/about/" class="dropdown-item">About</a>
</li>
                                    
<li>
    <a href="../../../books/advanced/" class="dropdown-item">Advanced</a>
</li>
                                    
<li>
    <a href="../../../books/basic/" class="dropdown-item">Basic</a>
</li>
                                    
<li>
    <a href="../../../books/develop/" class="dropdown-item">Develop</a>
</li>
                                    
<li>
    <a href="../../../books/express/" class="dropdown-item">Express</a>
</li>
                                    
<li>
    <a href="../../../books/trusted/" class="dropdown-item">Trusted</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Community hcl <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../community-hcl/components/" class="dropdown-item">Components</a>
</li>
                                    
<li>
    <a href="../../../community-hcl/getting-hardware-info/" class="dropdown-item">Getting hardware info</a>
</li>
                                    
<li>
    <a href="../../../community-hcl/systems/" class="dropdown-item">Systems</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Contrib <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../contrib/content/" class="dropdown-item">Content</a>
</li>
                                    
<li>
    <a href="../../../contrib/getting-started/" class="dropdown-item">Getting started</a>
</li>
                                    
<li>
    <a href="../../../contrib/git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../../../contrib/markdown/" class="dropdown-item">Markdown</a>
</li>
                                    
<li>
    <a href="../../../contrib/roles/" class="dropdown-item">Roles</a>
</li>
                                    
<li>
    <a href="../../../contrib/style/" class="dropdown-item">Style</a>
</li>
                                    
<li>
    <a href="../../../contrib/tools/" class="dropdown-item">Tools</a>
</li>
                                    
<li>
    <a href="../../../contrib/topics/" class="dropdown-item">Topics</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Dev <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../dev/building-openindiana/" class="dropdown-item">Building openindiana</a>
</li>
                                    
<li>
    <a href="../../../dev/distribution-constructor/" class="dropdown-item">Distribution constructor</a>
</li>
                                    
<li>
    <a href="../../../dev/existing-tasks/" class="dropdown-item">Existing tasks</a>
</li>
                                    
<li>
    <a href="../../../dev/graphics-stack/" class="dropdown-item">Graphics stack</a>
</li>
                                    
<li>
    <a href="../../../dev/repo-cleanup/" class="dropdown-item">Repo cleanup</a>
</li>
                                    
<li>
    <a href="../../../dev/userland/" class="dropdown-item">Userland</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Handbook <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../appendix/" class="dropdown-item">Appendix</a>
</li>
                                    
<li>
    <a href="../../common-tasks/" class="dropdown-item">Common tasks</a>
</li>
                                    
<li>
    <a href="../" class="dropdown-item">Community</a>
</li>
                                    
<li>
    <a href="../../getting-started/" class="dropdown-item">Getting started</a>
</li>
                                    
<li>
    <a href="../../legacy-branch/" class="dropdown-item">Legacy branch</a>
</li>
                                    
<li>
    <a href="../../network-communications/" class="dropdown-item">Network communications</a>
</li>
                                    
<li>
    <a href="../../openindiana-download-mirrors/" class="dropdown-item">Openindiana download mirrors</a>
</li>
                                    
<li>
    <a href="../../pdfdocs/" class="dropdown-item">Pdfdocs</a>
</li>
                                    
<li>
    <a href="../../sunray/" class="dropdown-item">Sunray</a>
</li>
                                    
<li>
    <a href="../../systems-administration/" class="dropdown-item">Systems administration</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Community</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../inputmethod/" class="dropdown-item">Inputmethod</a>
</li>
            
<li>
    <a href="../oracledb/" class="dropdown-item">Oracledb</a>
</li>
            
<li>
    <a href="../quikstor/" class="dropdown-item">Quikstor</a>
</li>
            
<li>
    <a href="../samqfs/" class="dropdown-item">Samqfs</a>
</li>
            
<li>
    <a href="../squeak/" class="dropdown-item">Squeak</a>
</li>
            
<li>
    <a href="../texlive/" class="dropdown-item">Texlive</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Vagrant</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Misc <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../misc/conduct/" class="dropdown-item">Conduct</a>
</li>
                                    
<li>
    <a href="../../../misc/oi-docs/" class="dropdown-item">Oi docs</a>
</li>
                                    
<li>
    <a href="../../../misc/openindiana/" class="dropdown-item">Openindiana</a>
</li>
                                    
<li>
    <a href="../../../misc/pdl/" class="dropdown-item">PUBLIC DOCUMENTATION LICENSE</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Release notes <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../release-notes/2015.03-release-notes/" class="dropdown-item">2015.03 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2015.10-release-notes/" class="dropdown-item">2015.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2016.04-release-notes/" class="dropdown-item">2016.04 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2016.10-release-notes/" class="dropdown-item">2016.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2017.04-release-notes/" class="dropdown-item">2017.04 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2017.10-release-notes/" class="dropdown-item">2017.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2018.04-release-notes/" class="dropdown-item">2018.04 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2018.10-release-notes/" class="dropdown-item">2018.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2019.04-release-notes/" class="dropdown-item">2019.04 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2019.10-release-notes/" class="dropdown-item">2019.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2020.04-release-notes/" class="dropdown-item">2020.04 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/2020.10-release-notes/" class="dropdown-item">2020.10 release notes</a>
</li>
                                    
<li>
    <a href="../../../release-notes/latest-changes/" class="dropdown-item">Latest changes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Retired <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../retired/" class="dropdown-item">Index</a>
</li>
                                    
<li>
    <a href="../../../retired/books/" class="dropdown-item">Books</a>
</li>
                                    
<li>
    <a href="../../../retired/bsd/" class="dropdown-item">Bsd</a>
</li>
                                    
<li>
    <a href="../../../retired/old-handbook/" class="dropdown-item">TODO: Booting</a>
</li>
                                    
<li>
    <a href="../../../retired/project/" class="dropdown-item">Project</a>
</li>
                                    
<li>
    <a href="../../../retired/sphinx/" class="dropdown-item">Sphinx</a>
</li>
                                    
<li>
    <a href="../../../retired/toolchain/" class="dropdown-item">Toolchain</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../texlive/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../../misc/conduct/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
    <a href="#main-content" class="skip-link">Skip to Content</a>

    <nav class="navbar-hardened">
        <a href="../../.." class="font-extrabold text-2xl shrink-0" style="color:var(--text-main)">
            OI <span style="color:var(--oi-primary)">DOCS</span>
        </a>

        <div class="header-search-wrap">
            <form role="search" onsubmit="return false;">
                <label for="mkdocs-search-query" class="sr-only">Search</label>
                <input type="text" id="mkdocs-search-query" class="header-search-input"
                       placeholder="Search docs..." autocomplete="off">
            </form>
            <div id="mkdocs-search-results" class="absolute top-full left-0 right-0 mt-2 rounded-xl shadow-2xl overflow-hidden" style="background:var(--card-bg); z-index: 100;"></div>
        </div>

        <div class="flex gap-3 shrink-0">
            <a href="../index.html"
               class="px-4 py-2 border-2 rounded-xl font-bold text-[10px] uppercase flex items-center"
               style="border-color:var(--card-border); color:var(--text-main);">
                Go to main page.
            </a>

            <button id="a11y-toggle" class="px-3 py-1.5 border-2 rounded-lg font-bold text-[9px] uppercase opacity-60 hover:opacity-100" style="border-color:var(--card-border)">
                W3C Access
            </button>
            <button id="master-theme-toggle" class="px-4 py-2 border-2 rounded-xl font-bold text-[10px] uppercase" style="border-color:var(--card-border)">
                DARK MODE
            </button>
        </div>
    </nav>

    
        <div class="documentation-container">
            <aside class="sidebar-nav">
                <p class="text-[10px] font-black uppercase tracking-widest opacity-40 mb-8">Navigation</p>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Welcome to OpenIndiana Reimagined
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Books
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Community hcl
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Contrib
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Dev
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--oi-primary)]">
                        Handbook
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Misc
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Release notes
                    </a>
                
                    <a href="../../.." class="block mb-4 text-sm font-bold no-underline hover:text-[var(--oi-primary)] text-[var(--text-main)]">
                        Retired
                    </a>
                
            </aside>
            <main id="main-content" class="documentation-wrapper">
                <article class="markdown-engine">
                    <!--

The contents of this Documentation are subject to the Public Documentation License Version 1.01
 (the "License"); you may only use this Documentation if you comply with the terms of this License.
A copy of the License is available at http://illumos.org/license/PDL.


The Original Documentation is at https://squeak.org/documentation/

The Initial Writer of this Documentation is David Stes Copyright (C) 2021.
All Rights Reserved. (https://sourceforge.net/u/stes/profile).

Contributor(s): David Stes.

-->

<h1 id="vagrant-installation">Vagrant Installation</h1>
<p>The following notes document the steps to install Vagrant on OpenIndiana Hipster.</p>
<p>Vagrant is a tool for building and managing virtual machine environments in a single workflow.  See <a href="https://www.vagrantup.com/">vagrantup.com</a> or <a href="https://www.hashicorp.com/">hashicorp.com</a> for more information.</p>
<p>The following notes explain how to build vagrant from source for OpenIndiana and how to use vagrant with VirtualBox as provider.</p>
<h2 id="installing-ruby-from-source">Installing Ruby from source</h2>
<p>Vagrant uses some tools such as git, curl, bsdtar and Ruby.  Although that Ruby is available in the OpenIndiana repositories, Hashicorp recommends NOT to use the system provided Ruby.  So we'll build Ruby from source as well.</p>
<p>Complete instructions from Hashicorp are available at :</p>
<p><a href="https://www.vagrantup.com/docs/installation/source">https://www.vagrantup.com/docs/installation/source</a></p>
<p>Create a ZFS filesystem (or just a directory) to install Ruby and Vagrant :</p>
<pre><code class="language-none">        # zfs create -o mountpoint=/scratch rpool/scratch
</code></pre>
<p>Make a non-root user the owner of that directory.  This is the user that you normally use to login into your OI system :</p>
<pre><code class="language-none">        # chown &lt;some-user&gt; /scratch
</code></pre>
<p>Install the OpenIndiana development tools if you do not already have them :</p>
<pre><code class="language-none">        # pkg install build-essential
</code></pre>
<p>You can use gcc 7.5 to build a 32bit executable, or use gcc 10.3 to build a 64bit ruby executable :</p>
<pre><code class="language-none">        # pkg install gcc-10
        # pkg set-mediator -V 10 gcc
        # pkg mediator gcc
         MEDIATOR            VER. SRC. VERSION IMPL. SRC. IMPLEMENTATION
         gcc                 local     10      system
</code></pre>
<p>Check that automake and autoconf are installed :</p>
<pre><code class="language-none">        # pkg install developer/build/autoconf
        # pkg install developer/build/automake
</code></pre>
<p>Then as ordinary non-root user continue.</p>
<p>As non-root user, you can now either build ruby from the git repo, or you can download a .tar.gz ruby source package.</p>
<p>If you clone the git repo, then do :</p>
<pre><code class="language-none">        $ cd /scratch
        $ git clone https://github.com/ruby/ruby.git
        $ cd ruby
        $ git checkout ruby_3_0
        $ ./autogen.sh
</code></pre>
<p>The above commands set up the source tree using the autogen.sh script and checkout the 3.0 branch of ruby.</p>
<p>On the other hand, if you download Ruby version 3.0.2 (or 3.0.3 when it will be released) from :</p>
<p><a href="https://www.ruby-lang.org/en/downloads/">https://www.ruby-lang.org/en/downloads/</a></p>
<p>then copy ruby-3.0.2.tar.gz to the scratch directory and extract it there :</p>
<pre><code class="language-none">        $ cd /scratch
        $ gtar xvfz ruby-3.0.2.tar.gz
</code></pre>
<p>In this case, make sure that the bison grammar ripper.y is NOT rebuilt on OI.  This is minor issue currently at time of writing these notes with bison.  The Ruby sources are generated with bison 3.5.1 while OI currently runs a more recent version of bison (3.8.2) :</p>
<pre><code class="language-none">        $ ls -l ruby-3.0.2/ext/ripper/ripper.*
        $ touch ruby-3.0.2/ext/ripper/ripper.c
</code></pre>
<p>You can verify that the grammar in the ruby source package is built using an older version of bison.  The touch command attempts to avoid a rebuild.</p>
<pre><code class="language-none">        $ head ruby-3.0.2/ext/ripper/ripper.y
        $ ls -l ruby-3.0.2/ext/ripper/ripper.*
</code></pre>
<p>Then cd into the source directory of the downloaded source package :</p>
<pre><code class="language-none">        $ cd ruby-3.0.2
</code></pre>
<p>Whether you have cloned the git repo, or downloaded the source package, continue now to configure Ruby 3.0.2 :</p>
<p>A first option is to build ruby with O3 and g3 optimisation and without DTrace :</p>
<pre><code class="language-none">        $ ./configure --disable-dtrace --with-gcc --prefix=/scratch/ruby-30
</code></pre>
<p>A second option, is to enable DTrace and build with O3 and g1 optimisation :</p>
<pre><code class="language-none">        $ ./configure --enable-dtrace --with-gcc --prefix=/scratch/ruby-30 debugflags=&quot;-g1&quot;
</code></pre>
<p>Note in the above, if you enable DTrace, that the debugflags is set to -g1 (level g1).  Currently there is a problem with the DTrace build and g3 level debug information, while with level 1 debug info, the build with DTrace enabled, works.</p>
<p>Either way, whether you have configured Ruby 3.0.2 with or without DTrace, install it under /scratch/ruby-30 as follows :</p>
<pre><code class="language-none">        $ gmake install
</code></pre>
<p>Modify the PATH to use Ruby 3.0.2 :</p>
<pre><code class="language-none">        $ PATH=/scratch/ruby-30/bin:$PATH
        $ ruby --version
        ruby 3.0.3p150 (2021-11-06 revision 6d540c1b98) [i386-solaris2.11]
</code></pre>
<p>The ruby 3.0.3p150 string is from the git repo using the not-yet released ruby 3.0.3.  But the same procedure applies to ruby 2.7.4, 3.0.2 or even ruby 3.1.</p>
<p>If you used gcc 10.3 for the build, you should see x64_64 instead of i386 because then you should have built a 64bit ruby instead.</p>
<h2 id="installing-vagrant-from-source">Installing Vagrant from source</h2>
<p>Complete instructions from Hashicorp are available at :</p>
<p><a href="https://www.vagrantup.com/docs/installation/source">https://www.vagrantup.com/docs/installation/source</a></p>
<p>Create a vagrant directory as ordinary non-root user (same login user as used for the installation of Ruby 3.0.2) :</p>
<pre><code class="language-none">        $ mkdir /scratch/vagrant
</code></pre>
<p>Git clone the Vagrant source code :</p>
<pre><code class="language-none">        $ cd /scratch/vagrant
        $ git clone https://github.com/hashicorp/vagrant.git .
</code></pre>
<p>Make sure that bundle and bundler commands are from Ruby 3.0.2 :</p>
<pre><code class="language-none">        $ type bundler
        bundler is a tracked alias for /scratch/ruby-30/bin/bundler
        ls /scratch/ruby-30/bin/
        bundle      htmldiff    listen      rdoc        rwinrm
        bundler     httpclient  racc        ri          rwinrmcp
        erb         irb         rake        rspec       thor
        gem         ldiff       rbs         ruby        typeprof
</code></pre>
<p>Follow the Hashicorp instructions for the install by running :</p>
<pre><code class="language-none">        $ bundle install
</code></pre>
<p>The above is a non-root installation into /scratch/ruby-30.</p>
<p>Then create a binstub and add it to your path :</p>
<pre><code class="language-none">        $ bundle --binstubs exec
        $ PATH=/scratch/vagrant/exec:$PATH
</code></pre>
<p>Note that the above adds the directory exec, not bin, to the PATH.  There also is a bin directory but that's not the binstub directory.</p>
<pre><code class="language-none">        $ type vagrant
        vagrant is a tracked alias for /scratch/vagrant/exec/vagrant
        $ vagrant --version
        Vagrant 2.2.20.dev
</code></pre>
<h2 id="virtualbox">VirtualBox</h2>
<p>Vagrant can use multiple providers, but in this case we use VirtualBox as provider:</p>
<pre><code class="language-none">        # pkg list virtualbox
        NAME (PUBLISHER)                                  VERSION                    IFO
        system/virtualbox                                 6.1.30-2021.0.0.0          i--
</code></pre>
<p>Vagrant uses a Vagrantfile to describe the actions to build the virtual machine or machines.  Once you or someone else creates a single Vagrantfile, you just need to vagrant up and everything is installed and configured for you to work.</p>
<p>If the Vagrantfile uses internal networks, check first that internal networks are defined in VirtualBox under the File menu (Host Network Manager).</p>
<p>The following example shows a setup with two internal networks.  By default there will only be just one internal network :</p>
<pre><code class="language-none">        # dladm show-phys | grep vbox
        vboxnet0     Ethernet             up         1000   full      vboxnet0
        vboxnet1     Ethernet             up         1000   full      vboxnet1
</code></pre>
<p>On VirtualBox 6.1.30 it also seems necessary to set up a file in /etc/vbox :</p>
<pre><code class="language-none">        $ cat /etc/vbox/networks.conf
        * 192.168.56.0/16 192.168.99.0/16
</code></pre>
<p>With the VBoxManage command, check the available internal networks:</p>
<pre><code class="language-none">        $ VBoxManage list hostonlyifs | grep 192
        IPAddress:       192.168.56.1
        IPAddress:       192.168.99.1
</code></pre>
<p>The above example is for 2 internal networks.  By default only the 192.168.56.1 is setup by the default VirtualBox installation.</p>
<h2 id="testing-vagrant-projects-from-oracle">Testing Vagrant projects from Oracle</h2>
<p>Many Vagrantfile are provided, for example some are by Oracle, for testing products such as the Oracle Database.</p>
<p>As ordinary login user do:</p>
<pre><code class="language-none">        $ mkdir -p /scratch/oracle/vagrant-projects
</code></pre>
<p>Then clone the Oracle vagrant projects :</p>
<pre><code class="language-none">        $ cd /scratch/oracle/vagrant-projects
        $ git clone https://github.com/oracle/vagrant-projects.git .
</code></pre>
<p>Some interesting Oracle Database products can be built :</p>
<pre><code class="language-none">        $ cd /scratch/oracle/vagrant-projects
        $ cd OracleDatabase/
        $ ls
        11.2.0.2   12.2.0.1   18.4.0-XE  21.3.0
        12.1.0.2   18.3.0     19.3.0     README.md
</code></pre>
<p>For example to build a 21.3 Oracle Database provided you can download from OTN (Oracle Tech Net) the LINUX.X64_213000_db_home.zip Oracle product :</p>
<pre><code class="language-none">        $ cd 21.3.0
        $ vagrant up
        Bringing machine 'oracle-21c-vagrant' up with 'virtualbox' provider...
        ==&gt; oracle-21c-vagrant: Importing base box 'oraclelinux/8'...
        ==&gt; oracle-21c-vagrant: Matching MAC address for NAT networking...

        ... lots of messages ---

        oracle-21c-vagrant: Oracle Database 21c Enterprise Edition Release 21.0.0.0.0 - Production
        oracle-21c-vagrant: Version 21.3.0.0.0
</code></pre>
<p>This is an example Vagrantfile to deploy a VirtualBox VM called oracle-21c-vagrant running Linux and Oracle Database 21c.</p>
<p>Many other Vagrantfiles exist in the cloud.</p>
<h2 id="vagrant-and-pulseaudio">Vagrant and Pulseaudio</h2>
<p>A Vagrant VM can set the PULSE_SERVER environment variable and play sounds or music on the host, if the host is set up to accept remote connections.</p>
<p>This is similar to X11 forwarding over SSH : X11 can also be forwarded from a Vagrant VM to the host.</p>
<p>On platforms with the paprefs executable, this can be configured using paprefs :</p>
<p><img alt="paprefs" src="../paprefs.png" /></p>
<p>If the paprefs command is not available, pulseaudio can be reconfigured with :</p>
<pre><code class="language-none">        dconf load /org/freedesktop/pulseaudio/module-groups/ &lt;&lt;EOF
        [remote-access]
        args0=''
        args1=''
        enabled=true
        name0='module-native-protocol-tcp'
        name1='module-esound-protocol-tcp'
        EOF
</code></pre>
<p>Check using the pax11publish or pactl info commands that pulseaudio accepts remote connections :</p>
<pre><code class="language-none">        $ pax11publish
        Server: {f6f2af56ea9e3944e926c6b946197a34b}unix:/tmp/pulse-K2hFZViPE4v5/native tcp:somehost:4713 tcp6:somehost:4713
</code></pre>
<p>On the host or in the Vagrant VM the pactl info command can be used to test the connection to the pulse server that is running on the host :</p>
<pre><code class="language-none">        $ pactl info
        Server String: tcp:localhost:24713
        Library Protocol Version: 33
        Server Protocol Version: 33
        Is Local: no
        ...
        Server Name: pulseaudio
        Server Version: 13.0-rebootstrapped
        Default Sample Specification: s16le 2ch 44100Hz
        Default Channel Map: front-left,front-right
        Default Sink: oss_output.dsp0
        Default Source: oss_input.dsp0
        Cookie: a3f5:b8e8
</code></pre>
<p>Note that there is a Cookie that is normally set on the host and VM for authentication; it should not be required, but you could (if necessary) copy this cookie from the host to the VM (but this seems not needed usually).</p>
<pre><code class="language-none">         cp $HOME/.config/pulse/cookie .
</code></pre>
<h2 id="openindiana-vagrantfiles">OpenIndiana Vagrantfiles</h2>
<p>See <a href="https://app.vagrantup.com/openindiana/boxes/hipster">https://app.vagrantup.com/openindiana/boxes/hipster</a>.</p>
<p>The oi-userland repository has for example also a Vagrantfile that can be used to create a VM to host oi-userland (by Adam Stevko and Michal Nowak).</p>
<p>A set of example Vagrantfiles that use the OpenIndiana Hipster operating system can be cloned from github by :</p>
<pre><code class="language-none">        # git clone https://github.com/openindiana/vagrantfiles
</code></pre>
<p>These examples create various virtual machines running OpenIndiana.</p>
                </article>
            </main>
        </div>
    

    <footer class="custom-footer">
        <div class="flex justify-between items-center opacity-60">
            <p class="text-[10px] font-black uppercase tracking-widest">OpenIndiana Reimagined</p>
            <div class="flex gap-8">
                <a href="https://www.openindiana.org/" class="font-bold text-sm no-underline hover:underline">Website</a>
                <a href="https://github.com/openindiana" class="font-bold text-sm no-underline hover:underline">GitHub</a>
            </div>
        </div>
    </footer>

    <script>
        (function() {
            const toggle = document.getElementById('master-theme-toggle');
            const a11yBtn = document.getElementById('a11y-toggle');
            const html = document.documentElement;

            a11yBtn.addEventListener('click', () => {
                html.classList.toggle('a11y-mode');
                a11yBtn.textContent = html.classList.contains('a11y-mode') ? "Standard Mode" : "W3C Access";
            });

            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    html.setAttribute('data-theme', 'dark');
                    toggle.textContent = 'LIGHT MODE';
                } else {
                    html.removeAttribute('data-theme');
                    toggle.textContent = 'DARK MODE';
                }
                localStorage.setItem('oi-theme-v5', theme);
            };
            applyTheme(localStorage.getItem('oi-theme-v5') || 'light');
            toggle.addEventListener('click', () => applyTheme(html.hasAttribute('data-theme') ? 'light' : 'dark'));

            setInterval(() => {
                const results = document.getElementById('mkdocs-search-results');
                if (results) {
                    results.querySelectorAll('p').forEach(d => d.style.display = 'none');
                }
            }, 150);
        })();
    </script>

            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/jquery-3.6.0.min.js"></script>
        <script src="../../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
